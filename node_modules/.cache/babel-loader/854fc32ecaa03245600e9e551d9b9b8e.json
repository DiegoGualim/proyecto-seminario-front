{"remainingRequest":"/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/node_modules/babel-loader/lib/index.js!/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/src/components/ReConsulta/Visualizer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/src/components/ReConsulta/Visualizer.vue","mtime":1682135281993},{"path":"/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/node_modules/cache-loader/dist/cjs.js","mtime":1682135249203},{"path":"/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/node_modules/babel-loader/lib/index.js","mtime":1682135246328},{"path":"/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/node_modules/cache-loader/dist/cjs.js","mtime":1682135249203},{"path":"/Users/diegogualim/Documents/PROYECTOS_GRADUACION/PROYECTO_OTTO/proyecto_frond/node_modules/vue-loader/lib/index.js","mtime":1682135279447}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlcXVlc3RIYW5kbGVyIH0gZnJvbSAiQC9oZWxwZXJzL3JlcXVlc3RIYW5kbGVyIjsKaW1wb3J0IHsgcmVxdWVzdE9wdGlvbnMgfSBmcm9tICJAL2hlbHBlcnMvcmVxdWVzdE9wdGlvbnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlQ29uc3VsdGFWaXN1YWxpemVyIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXhwZWRpZW50czogbnVsbCwKICAgICAgcG9sbGluZzogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHBvbGxEYXRhKCkgewogICAgICB0aGlzLkdldEV4cGVkaWVudHMoKTsKICAgICAgdGhpcy5wb2xsaW5nID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHsKICAgICAgICB0aGlzLkdldEV4cGVkaWVudHMoKTsKICAgICAgfSwgMTAwMDApOwogICAgfSwKICAgIGFzeW5jIEdpdmVFeHBlZGllbnQoZXhwZWRpZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKGV4cGVkaWVudCk7CiAgICAgIGNvbnN0IHJlc3BvbnNlR2l2ZUV4cGVkaWVudCA9IGF3YWl0IHJlcXVlc3RIYW5kbGVyLmFzeW5jX2ZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQkFDS0VORH0vYXBpL3YxL2NvbnN1bHRhdGlvbnMvZXhwZWRpZW50LyR7ZXhwZWRpZW50LmlkfWAsIHJlcXVlc3RPcHRpb25zLnB1dCgpKTsKICAgICAgdGhpcy5jbG9zZUV4cGVkaWVudChleHBlZGllbnQpOwogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZUdpdmVFeHBlZGllbnQpOwogICAgfSwKICAgIGFzeW5jIEdldEV4cGVkaWVudHMoKSB7CiAgICAgIHRoaXMuZXhwZWRpZW50cyA9IGF3YWl0IHJlcXVlc3RIYW5kbGVyLmFzeW5jX2ZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQkFDS0VORH0vYXBpL3YxL3BhdGllbnRzLWV4cGVkaWVudHNgLCByZXF1ZXN0T3B0aW9ucy5nZXQoKSk7CiAgICB9LAogICAgLy9Cb3JyYXIgZXhwZWRpZW50ZXMgZGVsIGFycmF5IHBhcmEgcXVlIG5vIHNlIHRhcmRlIGVuIGVsaW1pbmFyIGhhc3RhIHF1ZSB2dWVsdmEgYSBoYWNlciBsYSBwZXRpY2lvbiBkZSByZWZyZXNjYXIKICAgIGNsb3NlRXhwZWRpZW50KGV4cGVkaWVudCkgewogICAgICB0aGlzLmV4cGVkaWVudHMgPSB0aGlzLmV4cGVkaWVudHMuZmlsdGVyKGV4cCA9PiBleHAuaWQgIT0gZXhwZWRpZW50LmlkKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxpbmcpOwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucG9sbERhdGEoKTsKICB9LAogIGNvbXB1dGVkOiB7fQp9Ow=="},{"version":3,"sources":["Visualizer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA,SAAA,cAAA,QAAA,0BAAA;AACA,SAAA,cAAA,QAAA,0BAAA;AAEA,eAAA;EACA,IAAA,EAAA,sBAAA;EACA,IAAA,GAAA;IACA,OAAA;MACA,UAAA,EAAA,IAAA;MACA,OAAA,EAAA;IACA,CAAA;EACA,CAAA;EACA,OAAA,EAAA;IACA,QAAA,GAAA;MACA,IAAA,CAAA,aAAA,EAAA;MACA,IAAA,CAAA,OAAA,GAAA,MAAA,CAAA,WAAA,CAAA,MAAA;QACA,IAAA,CAAA,aAAA,EAAA;MACA,CAAA,EAAA,KAAA,CAAA;IACA,CAAA;IACA,MAAA,aAAA,CAAA,SAAA,EAAA;MACA,OAAA,CAAA,GAAA,CAAA,SAAA,CAAA;MACA,MAAA,qBAAA,GAAA,MAAA,cAAA,CAAA,WAAA,CACA,GAAA,OAAA,CAAA,GAAA,CAAA,eAAA,mCAAA,SAAA,CAAA,EAAA,EAAA,EACA,cAAA,CAAA,GAAA,EAAA,CACA;MACA,IAAA,CAAA,cAAA,CAAA,SAAA,CAAA;MACA,OAAA,CAAA,GAAA,CAAA,qBAAA,CAAA;IACA,CAAA;IACA,MAAA,aAAA,GAAA;MACA,IAAA,CAAA,UAAA,GAAA,MAAA,cAAA,CAAA,WAAA,CACA,GAAA,OAAA,CAAA,GAAA,CAAA,eAAA,6BAAA,EACA,cAAA,CAAA,GAAA,EAAA,CACA;IACA,CAAA;IACA;IACA,cAAA,CAAA,SAAA,EAAA;MACA,IAAA,CAAA,UAAA,GAAA,IAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,IAAA,GAAA,CAAA,EAAA,IAAA,SAAA,CAAA,EAAA,CAAA;IACA;EACA,CAAA;EACA,aAAA,GAAA;IACA,MAAA,CAAA,aAAA,CAAA,IAAA,CAAA,OAAA,CAAA;EACA,CAAA;EACA,OAAA,GAAA;IACA,IAAA,CAAA,QAAA,EAAA;EACA,CAAA;EACA,QAAA,EAAA,CAAA;AACA,CAAA","sourcesContent":["<template>\n  <div>\n    <!-- <b-card-group deck class=\"visualizer\">\n      <b-card\n        v-for=\"expedient in this.expedients\"\n        v-bind:key=\"expedient.id\"\n        :title=\"expedient.first_name + ' ' + expedient.last_name\"\n        img-top\n        tag=\"article\"\n        style=\"max-width: 20rem\"\n        class=\"mb-2 visualizer\"\n      >\n        <b-card-text>\n          {{ expedient.expedient }}\n        </b-card-text>\n\n        <b-button\n          @click=\"GiveExpedient(expedient)\"\n          href=\"#\"\n          variant=\"primary bg-success\"\n          >Entregado</b-button\n        >\n      </b-card>\n    </b-card-group> +\n            \" - \" +\n            expedient.carnet-->\n    <b-row cols=\"1\" cols-sm=\"2\" cols-md=\"3\" cols-lg=\"4\" cols-xl=\"5\" deck>\n      <b-col\n        v-for=\"expedient in this.expedients\"\n        v-bind:key=\"expedient.id\"\n        class=\"mb-3\"\n      >\n        <b-card-header class=\"header-visualizer\">\n          {{ expedient.first_name + \" \" + expedient.last_name }}\n        </b-card-header>\n        <b-card img-top tag=\"article\" class=\"mb-1 visualizer\">\n          <b-card-text>\n            {{ expedient.carnet + \" \" + expedient.date }}<br />\n            {{ expedient.type }}\n          </b-card-text>\n          <template #footer>\n            <b-button\n              @click=\"GiveExpedient(expedient)\"\n              href=\"#\"\n              variant=\"primary bg-success\"\n              >Entregar</b-button\n            >\n          </template>\n        </b-card>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nimport { requestHandler } from \"@/helpers/requestHandler\";\nimport { requestOptions } from \"@/helpers/requestOptions\";\n\nexport default {\n  name: \"ReConsultaVisualizer\",\n  data() {\n    return {\n      expedients: null,\n      polling: null,\n    };\n  },\n  methods: {\n    pollData() {\n      this.GetExpedients();\n      this.polling = window.setInterval(() => {\n        this.GetExpedients();\n      }, 10000);\n    },\n    async GiveExpedient(expedient) {\n      console.log(expedient);\n      const responseGiveExpedient = await requestHandler.async_fetch(\n        `${process.env.VUE_APP_BACKEND}/api/v1/consultations/expedient/${expedient.id}`,\n        requestOptions.put()\n      );\n      this.closeExpedient(expedient);\n      console.log(responseGiveExpedient);\n    },\n    async GetExpedients() {\n      this.expedients = await requestHandler.async_fetch(\n        `${process.env.VUE_APP_BACKEND}/api/v1/patients-expedients`,\n        requestOptions.get()\n      );\n    },\n    //Borrar expedientes del array para que no se tarde en eliminar hasta que vuelva a hacer la peticion de refrescar\n    closeExpedient(expedient) {\n      this.expedients = this.expedients.filter((exp) => exp.id != expedient.id);\n    },\n  },\n  beforeDestroy() {\n    window.clearInterval(this.polling);\n  },\n  created() {\n    this.pollData();\n  },\n  computed: {},\n};\n</script>\n"],"sourceRoot":"src/components/ReConsulta"}]}