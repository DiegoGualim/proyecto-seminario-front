{"remainingRequest":"/Users/diegogualim/Documents/GUAITECH-APIS-INTERNAL/fundacionapa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/diegogualim/Documents/GUAITECH-APIS-INTERNAL/fundacionapa/src/components/ReConsulta/Visualizer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/diegogualim/Documents/GUAITECH-APIS-INTERNAL/fundacionapa/src/components/ReConsulta/Visualizer.vue","mtime":1671906349164},{"path":"/Users/diegogualim/Documents/GUAITECH-APIS-INTERNAL/fundacionapa/node_modules/cache-loader/dist/cjs.js","mtime":1672093339547},{"path":"/Users/diegogualim/Documents/GUAITECH-APIS-INTERNAL/fundacionapa/node_modules/babel-loader/lib/index.js","mtime":1672093340413},{"path":"/Users/diegogualim/Documents/GUAITECH-APIS-INTERNAL/fundacionapa/node_modules/cache-loader/dist/cjs.js","mtime":1672093339547},{"path":"/Users/diegogualim/Documents/GUAITECH-APIS-INTERNAL/fundacionapa/node_modules/vue-loader/lib/index.js","mtime":1672093340629}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlcXVlc3RIYW5kbGVyIH0gZnJvbSAiQC9oZWxwZXJzL3JlcXVlc3RIYW5kbGVyIjsKaW1wb3J0IHsgcmVxdWVzdE9wdGlvbnMgfSBmcm9tICJAL2hlbHBlcnMvcmVxdWVzdE9wdGlvbnMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZUNvbnN1bHRhVmlzdWFsaXplciIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGV4cGVkaWVudHM6IG51bGwsCiAgICAgIHBvbGxpbmc6IG51bGwsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcG9sbERhdGEoKSB7CiAgICAgIHRoaXMuR2V0RXhwZWRpZW50cygpOwogICAgICB0aGlzLnBvbGxpbmcgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHRoaXMuR2V0RXhwZWRpZW50cygpOwogICAgICB9LCAxMDAwMCk7CiAgICB9LAogICAgYXN5bmMgR2l2ZUV4cGVkaWVudChleHBlZGllbnQpIHsKICAgICAgY29uc29sZS5sb2coZXhwZWRpZW50KTsKICAgICAgY29uc3QgcmVzcG9uc2VHaXZlRXhwZWRpZW50ID0gYXdhaXQgcmVxdWVzdEhhbmRsZXIuYXN5bmNfZmV0Y2goCiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9CQUNLRU5EfS9hcGkvdjEvY29uc3VsdGF0aW9ucy9leHBlZGllbnQvJHtleHBlZGllbnQuaWR9YCwKICAgICAgICByZXF1ZXN0T3B0aW9ucy5wdXQoKQogICAgICApOwogICAgICB0aGlzLmNsb3NlRXhwZWRpZW50KGV4cGVkaWVudCk7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlR2l2ZUV4cGVkaWVudCk7CiAgICB9LAogICAgYXN5bmMgR2V0RXhwZWRpZW50cygpIHsKICAgICAgdGhpcy5leHBlZGllbnRzID0gYXdhaXQgcmVxdWVzdEhhbmRsZXIuYXN5bmNfZmV0Y2goCiAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9CQUNLRU5EfS9hcGkvdjEvcGF0aWVudHMtZXhwZWRpZW50c2AsCiAgICAgICAgcmVxdWVzdE9wdGlvbnMuZ2V0KCkKICAgICAgKTsKICAgIH0sCiAgICAvL0JvcnJhciBleHBlZGllbnRlcyBkZWwgYXJyYXkgcGFyYSBxdWUgbm8gc2UgdGFyZGUgZW4gZWxpbWluYXIgaGFzdGEgcXVlIHZ1ZWx2YSBhIGhhY2VyIGxhIHBldGljaW9uIGRlIHJlZnJlc2NhcgogICAgY2xvc2VFeHBlZGllbnQoZXhwZWRpZW50KSB7CiAgICAgIHRoaXMuZXhwZWRpZW50cyA9IHRoaXMuZXhwZWRpZW50cy5maWx0ZXIoKGV4cCkgPT4gZXhwLmlkICE9IGV4cGVkaWVudC5pZCk7CiAgICB9LAogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMucG9sbGluZyk7CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5wb2xsRGF0YSgpOwogIH0sCiAgY29tcHV0ZWQ6IHt9LAp9Owo="},{"version":3,"sources":["Visualizer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Visualizer.vue","sourceRoot":"src/components/ReConsulta","sourcesContent":["<template>\n  <div>\n    <!-- <b-card-group deck class=\"visualizer\">\n      <b-card\n        v-for=\"expedient in this.expedients\"\n        v-bind:key=\"expedient.id\"\n        :title=\"expedient.first_name + ' ' + expedient.last_name\"\n        img-top\n        tag=\"article\"\n        style=\"max-width: 20rem\"\n        class=\"mb-2 visualizer\"\n      >\n        <b-card-text>\n          {{ expedient.expedient }}\n        </b-card-text>\n\n        <b-button\n          @click=\"GiveExpedient(expedient)\"\n          href=\"#\"\n          variant=\"primary bg-success\"\n          >Entregado</b-button\n        >\n      </b-card>\n    </b-card-group> +\n            \" - \" +\n            expedient.carnet-->\n    <b-row cols=\"1\" cols-sm=\"2\" cols-md=\"3\" cols-lg=\"4\" cols-xl=\"5\" deck>\n      <b-col\n        v-for=\"expedient in this.expedients\"\n        v-bind:key=\"expedient.id\"\n        class=\"mb-3\"\n      >\n        <b-card-header class=\"header-visualizer\">\n          {{ expedient.first_name + \" \" + expedient.last_name }}\n        </b-card-header>\n        <b-card img-top tag=\"article\" class=\"mb-1 visualizer\">\n          <b-card-text>\n            {{ expedient.carnet + \" \" + expedient.date }}<br />\n            {{ expedient.type }}\n          </b-card-text>\n          <template #footer>\n            <b-button\n              @click=\"GiveExpedient(expedient)\"\n              href=\"#\"\n              variant=\"primary bg-success\"\n              >Entregar</b-button\n            >\n          </template>\n        </b-card>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nimport { requestHandler } from \"@/helpers/requestHandler\";\nimport { requestOptions } from \"@/helpers/requestOptions\";\n\nexport default {\n  name: \"ReConsultaVisualizer\",\n  data() {\n    return {\n      expedients: null,\n      polling: null,\n    };\n  },\n  methods: {\n    pollData() {\n      this.GetExpedients();\n      this.polling = window.setInterval(() => {\n        this.GetExpedients();\n      }, 10000);\n    },\n    async GiveExpedient(expedient) {\n      console.log(expedient);\n      const responseGiveExpedient = await requestHandler.async_fetch(\n        `${process.env.VUE_APP_BACKEND}/api/v1/consultations/expedient/${expedient.id}`,\n        requestOptions.put()\n      );\n      this.closeExpedient(expedient);\n      console.log(responseGiveExpedient);\n    },\n    async GetExpedients() {\n      this.expedients = await requestHandler.async_fetch(\n        `${process.env.VUE_APP_BACKEND}/api/v1/patients-expedients`,\n        requestOptions.get()\n      );\n    },\n    //Borrar expedientes del array para que no se tarde en eliminar hasta que vuelva a hacer la peticion de refrescar\n    closeExpedient(expedient) {\n      this.expedients = this.expedients.filter((exp) => exp.id != expedient.id);\n    },\n  },\n  beforeDestroy() {\n    window.clearInterval(this.polling);\n  },\n  created() {\n    this.pollData();\n  },\n  computed: {},\n};\n</script>\n"]}]}